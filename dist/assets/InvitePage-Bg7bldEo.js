import{r as e,j as t}from"./react-vendor-C8-TlGsU.js";import{u as s,s as a,S as r}from"./index-BaS3q1EV.js";import"./pdf-utils-DX6aKe5X.js";import"./vendor-D2WcXlqy.js";import"./supabase-DIRwJvxg.js";const l=({onNavigate:l,showToast:i})=>{const{withLoading:n}=s(),[c,d]=e.useState(null),[o,x]=e.useState({total_invited:0,total_investors:0,total_earned:0}),[m,p]=e.useState("vendas-online.vercel.app"),[h,b]=e.useState(!0);e.useEffect(()=>{g()},[]);const g=async()=>{try{b(!0);const{data:{user:e}}=await a.auth.getUser();if(!e)return;const{data:t}=await a.from("profiles").select("invite_code").eq("id",e.id).single();t&&d(t.invite_code);const{data:s}=await a.rpc("get_my_team"),r=s?.length||0,l=s?.filter(e=>(e.reloaded_amount||0)>=3e3).length||0,{data:i}=await a.from("bonus_transacoes").select("valor_recebido").eq("user_id",e.id),n=i?.reduce((e,t)=>e+Number(t.valor_recebido),0)||0,{data:c}=await a.from("atendimento_links").select("link_app_atualizado").limit(1).single();c?.link_app_atualizado&&p(c.link_app_atualizado),x({total_invited:r,total_investors:l,total_earned:n})}catch(e){}finally{b(!1)}};return t.jsxs("div",{className:"bg-white font-sans text-[#0F1111] antialiased min-h-screen flex flex-col selection:bg-amber-100",children:[t.jsx("header",{className:"header-gradient-mixture pb-16 pt-4 px-4",children:t.jsx("div",{className:"relative z-10 flex items-center justify-center h-11",children:t.jsx("h1",{className:"text-xl font-black text-white tracking-tight",children:"Convidar Amigos"})})}),t.jsx("main",{className:"flex-1 overflow-y-auto no-scrollbar p-5 space-y-6 pb-40",children:h?t.jsx("div",{className:"flex justify-center py-20",children:t.jsx(r,{size:"w-8 h-8",color:"text-[#00C853]"})}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"bg-gray-50 border border-gray-100 rounded-[32px] p-6 text-[#111] relative overflow-hidden shadow-sm",children:[t.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-[0.03]",children:t.jsx("span",{className:"material-symbols-outlined text-9xl text-[#00C853]",children:"group_add"})}),t.jsx("h3",{className:"text-2xl font-black mb-1 leading-tight tracking-tighter",children:"Indique e Ganhe"}),t.jsx("p",{className:"text-[13px] font-bold text-[#565959] mb-6 max-w-[200px]",children:"Compartilhe a experiência BP e ganhe comissões ilimitadas."}),t.jsxs("div",{className:"bg-white rounded-2xl p-4 flex items-center justify-between border border-gray-50 shadow-sm relative z-10",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-[10px] font-bold uppercase tracking-widest text-[#565959] mb-1",children:"Seu Código"}),t.jsx("p",{className:"text-3xl font-black tracking-wider font-mono text-[#00C853]",children:c||"---"})]}),t.jsx("button",{onClick:e=>{const t=e.currentTarget;t.classList.add("scale-75"),setTimeout(()=>t.classList.remove("scale-75"),200),c&&navigator.clipboard.writeText(c).then(()=>{i?.("Código copiado!","success")})},className:"size-12 bg-[#F8FAF8] text-black rounded-xl flex items-center justify-center active:scale-90 transition-all border border-gray-100/50 hover:bg-[#00C853] hover:text-white",children:t.jsx("span",{className:"material-symbols-outlined",children:"content_copy"})})]})]}),t.jsxs("div",{className:"bg-white rounded-[32px] p-5 border border-gray-50 shadow-sm",children:[t.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[t.jsx("div",{className:"size-12 rounded-full bg-[#F8FAF8] text-[#0F1111] flex items-center justify-center border border-gray-50",children:t.jsx("span",{className:"material-symbols-outlined text-2xl",children:"link"})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h4",{className:"font-bold text-[16px]",children:"Link de Convite"}),t.jsx("p",{className:"text-[12px] text-[#565959] font-medium",children:"Divulgue seu ref para novos usuários"})]})]}),t.jsx("div",{className:"flex gap-3",children:t.jsxs("button",{onClick:e=>{const t=e.currentTarget;t.classList.add("scale-95"),setTimeout(()=>t.classList.remove("scale-95"),200),(()=>{if(!c)return;let e=m.trim();e.startsWith("http")||(e=`https://${e}`),e.endsWith("/")&&(e=e.slice(0,-1));const t=`${e}/register?ref=${c}`;navigator.clipboard.writeText(t).then(()=>{i?.("Link copiado com sucesso!","success")})})()},className:"flex-1 h-[45px] bg-[#111] text-white rounded-2xl font-black text-[15px] hover:bg-black transition-all flex items-center justify-center gap-3 shadow-xl shadow-black/5 active:bg-[#333]",children:[t.jsx("span",{className:"material-symbols-outlined text-xl",children:"share"}),"Copiar Link de Convite"]})})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"bg-white rounded-[32px] p-5 border border-gray-50 shadow-sm flex flex-col items-center justify-center text-center",children:[t.jsx("span",{className:"material-symbols-outlined text-3xl text-gray-400 mb-2",children:"groups"}),t.jsx("p",{className:"text-2xl font-black",children:o.total_invited}),t.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest",children:"Indicados"})]}),t.jsxs("div",{className:"bg-white rounded-[32px] p-5 border border-gray-50 shadow-sm flex flex-col items-center justify-center text-center",children:[t.jsx("span",{className:"material-symbols-outlined text-3xl text-[#00C853] mb-2",children:"account_balance_wallet"}),t.jsxs("p",{className:"text-2xl font-black",children:["Kz ",o.total_earned]}),t.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest",children:"Saldo Recebido"})]})]}),t.jsx("div",{className:"pt-2",children:t.jsxs("button",{onClick:()=>l("subordinate-list"),className:"w-full h-[45px] bg-[#F8FAF8] text-[#111] rounded-2xl flex items-center justify-center gap-3 font-bold text-sm active:scale-95 transition-all border border-gray-50",children:[t.jsx("span",{className:"material-symbols-outlined",children:"group"}),"Ver Minha Equipe"]})}),t.jsxs("div",{className:"space-y-4 pt-4 border-t border-gray-50",children:[t.jsx("h4",{className:"font-bold text-[13px] uppercase tracking-widest text-[#565959] px-2",children:"Como Funciona"}),t.jsxs("div",{className:"flex gap-4 items-start px-2",children:[t.jsx("div",{className:"size-8 rounded-full bg-gray-50 border border-gray-50 flex items-center justify-center font-black text-xs shrink-0 text-[#0F1111]",children:"1"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-bold text-[14px]",children:"Compartilhe seu link"}),t.jsx("p",{className:"text-[12px] text-gray-400 mt-0.5",children:"Envie seu link exclusivo para seus contatos."})]})]}),t.jsxs("div",{className:"flex gap-4 items-start px-2",children:[t.jsx("div",{className:"size-8 rounded-full bg-gray-50 border border-gray-50 flex items-center justify-center font-black text-xs shrink-0 text-[#0F1111]",children:"2"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-bold text-[14px]",children:"Eles se cadastram"}),t.jsx("p",{className:"text-[12px] text-gray-400 mt-0.5",children:"Seus amigos criam contas na BP usando seu ref."})]})]}),t.jsxs("div",{className:"flex gap-4 items-start px-2",children:[t.jsx("div",{className:"size-8 rounded-full bg-gray-50 border border-gray-50 flex items-center justify-center font-black text-xs shrink-0 text-[#0F1111]",children:"3"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-bold text-[14px]",children:"Você lucra"}),t.jsx("p",{className:"text-[12px] text-gray-400 mt-0.5",children:"Receba comissões automáticas por cada operação deles."})]})]})]}),t.jsxs("div",{className:"pt-8 border-t border-gray-100",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6 px-2",children:[t.jsxs("div",{className:"flex items-center gap-2.5",children:[t.jsx("div",{className:"size-10 rounded-xl bg-amber-50 flex items-center justify-center border border-transparent",children:t.jsx("span",{className:"material-symbols-outlined text-[#E47911] text-[24px]",children:"workspace_premium"})}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-black text-[15px] text-[#0F1111] leading-none",children:"Metas de Equipe"}),t.jsx("p",{className:"text-[10px] text-gray-400 font-bold uppercase tracking-tighter mt-1",children:"Apenas membros investidores contam"})]})]}),t.jsx("div",{className:"px-3 py-1 bg-green-50 rounded-full border border-green-100 font-black",children:t.jsxs("span",{className:"text-[10px] text-[#00C853]",children:[o.total_investors," INVESTIDORES"]})})]}),t.jsx("div",{className:"space-y-4",children:[{level:1,target:50,reward:4e3,title:"Bronze",color:"#B12704",bg:"bg-[#FFF5F2]",icon:"military_tech"},{level:2,target:100,reward:8e3,title:"Prata",color:"#565959",bg:"bg-[#F7F8F8]",icon:"stars"},{level:3,target:500,reward:5e4,title:"Ouro",color:"#856404",bg:"bg-[#FFFBF0]",icon:"emoji_events"},{level:4,target:1e3,reward:1e5,title:"Diamante",color:"#007185",bg:"bg-[#F0F9FB]",icon:"diamond"}].map(e=>{const s=Math.min(o.total_investors/e.target*100,100),a=o.total_investors>=e.target;return t.jsx("div",{className:"group relative overflow-hidden rounded-[32px] border transition-all duration-300 "+(a?"border-green-100 bg-white shadow-xl shadow-green-900/5":"bg-white border-gray-50 shadow-sm"),children:t.jsxs("div",{className:"p-5 relative z-10",children:[t.jsxs("div",{className:"flex justify-between items-start mb-4",children:[t.jsxs("div",{className:"flex gap-3",children:[t.jsx("div",{className:"size-12 rounded-2xl flex items-center justify-center border border-transparent "+(a?"bg-green-50 text-green-600":`${e.bg}`),style:{color:a?void 0:e.color},children:t.jsx("span",{className:"material-symbols-outlined text-[28px]",style:{fontVariationSettings:"'FILL' 1"},children:a?"verified":e.icon})}),t.jsxs("div",{children:[t.jsxs("p",{className:"text-[10px] font-black uppercase tracking-widest "+(a?"text-green-600":"text-gray-400"),children:["NÍVEL ",e.level," • ",e.title]}),t.jsxs("h5",{className:"font-black text-[18px] text-[#111] leading-tight",children:[e.target," ",t.jsx("span",{className:"text-[13px] font-bold text-gray-400",children:"Investidores"})]})]})]}),t.jsxs("div",{className:"flex flex-col items-end",children:[t.jsx("span",{className:"text-[9px] font-black text-gray-300 uppercase tracking-tighter",children:"Prêmio"}),t.jsxs("div",{className:"flex items-baseline gap-0.5 text-[#B12704]",children:[t.jsx("span",{className:"text-[10px] font-black",children:"Kz"}),t.jsx("span",{className:"text-[20px] font-black tracking-tighter",children:e.reward.toLocaleString("pt-AO")})]})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex justify-between items-end mb-1 px-1",children:[t.jsx("p",{className:"text-[10px] font-bold text-gray-400",children:a?t.jsx("span",{className:"flex items-center gap-1 text-green-600 font-black",children:"META ATINGIDA"}):t.jsxs(t.Fragment,{children:["Progresso: ",t.jsx("span",{className:"text-[#111]",children:o.total_investors})," / ",e.target]})}),t.jsxs("span",{className:"text-[11px] font-black "+(a?"text-green-600":"text-[#111]"),children:[Math.floor(s),"%"]})]}),t.jsx("div",{className:"relative w-full h-2.5 bg-gray-50 rounded-full overflow-hidden border border-gray-100/50",children:t.jsx("div",{className:"h-full transition-all duration-1000 ease-out "+(a?"bg-green-500":"bg-[#00C853]"),style:{width:`${s}%`}})})]})]})},e.level)})})]})]})})]})};export{l as default};
