import{r as e,j as t}from"./react-vendor-0Am1niUb.js";import{a,u as s,s as r}from"./index-BonT0QVc.js";import"./supabase-BsxaddrC.js";import"./vendor-DtN75V_I.js";const l=({onNavigate:l,showToast:i})=>{const{runWithTimeout:n}=a(),{withLoading:o}=s(),[c,d]=e.useState(!1),[x,p]=e.useState(""),[m,h]=e.useState("");return t.jsxs("div",{className:"bg-bg-neutral min-h-screen font-sans text-text-main flex flex-col items-center pb-12 antialiased relative",children:[t.jsxs("div",{className:"w-full relative h-[280px] header-gradient-mixture overflow-hidden flex flex-col items-center justify-center",children:[t.jsx("div",{className:"absolute inset-0 opacity-20 pointer-events-none",style:{backgroundImage:"radial-gradient(circle, #ffffff 1.5px, transparent 1.5px)",backgroundSize:"24px 24px"}}),t.jsx("div",{className:"absolute top-6 left-6 flex items-center gap-4 z-20",children:t.jsx("button",{className:"flex items-center justify-center size-10 rounded-full bg-black/10 text-white backdrop-blur-sm active:scale-95 transition-all",children:t.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"headset_mic"})})}),t.jsx("div",{className:"absolute top-6 right-6 z-20",children:t.jsxs("button",{className:"flex items-center gap-1.5 px-3 py-1.5 rounded-full bg-black/10 text-white backdrop-blur-sm text-[12px] font-bold active:scale-95 transition-all",children:[t.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"language"}),"Português",t.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"expand_more"})]})}),t.jsxs("div",{className:"relative z-10 flex flex-col items-center",children:[t.jsx("div",{className:"w-24 h-24 bg-white p-2 rounded-xl flex items-center justify-center shadow-2xl mb-4 border-2 border-primary/20",children:t.jsxs("div",{className:"flex flex-col items-center leading-none text-primary",children:[t.jsx("span",{className:"text-[10px] font-black italic tracking-tighter",children:"THE"}),t.jsx("span",{className:"text-[18px] font-black tracking-tightest",children:"HOME"}),t.jsx("span",{className:"text-[14px] font-black italic tracking-tighter",children:"DEPOT"})]})}),t.jsx("h1",{className:"text-2xl font-black text-white tracking-widest uppercase drop-shadow-md",children:"THE HOME-VIP"})]})]}),t.jsx("div",{className:"w-full px-4 -mt-10 relative z-30",children:t.jsxs("div",{className:"bg-white rounded-[32px] overflow-hidden shadow-premium",children:[t.jsxs("div",{className:"flex",children:[t.jsx("div",{className:"bg-white px-8 py-4 rounded-tr-[32px] relative",children:t.jsx("span",{className:"text-primary font-black text-[15px]",children:"Acessar minha conta"})}),t.jsx("div",{className:"flex-1 bg-transparent"})]}),t.jsxs("form",{className:"p-8 pt-4 flex flex-col gap-6",onSubmit:async e=>{e.preventDefault();const t=x.replace(/\D/g,""),a=m.trim();if(!t||t.length<9)i?.("Número de telefone inválido.","error");else if(!a||a.length<6||a.length>8)i?.("A senha deve ter entre 6 e 8 caracteres.","error");else try{await o(async()=>{const{data:e,error:s}=await r.rpc("check_login_status",{phone_input:t});if(!s&&e?.blocked)throw new Error(e.message);const l=`${t}@bpcommerce.user`,{error:i}=await n(()=>r.auth.signInWithPassword({email:l,password:a}));if(i)throw await r.rpc("register_failed_attempt",{phone_input:t}),new Error("Credenciais inválidas");await r.rpc("reset_login_attempts",{phone_input:t})},"Login sucedido!"),l("home")}catch(s){i?.(s.message||"Erro ao entrar","error")}},children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-[14px] font-bold text-text-main ml-1",children:"Número de telefone"}),t.jsxs("div",{className:"bg-input-bg rounded-[16px] h-[58px] flex items-center px-4 gap-3 focus-within:ring-2 ring-primary/20 transition-all border border-primary/5",children:[t.jsx("span",{className:"text-text-main font-bold text-[14px]",children:"+244"}),t.jsx("input",{type:"tel",placeholder:"Número de telefone",className:"bg-transparent flex-1 h-full outline-none text-text-main font-semibold placeholder:text-text-secondary/40 text-[15px]",value:x,onChange:e=>p(e.target.value),required:!0})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-[14px] font-bold text-text-main ml-1",children:"Senha"}),t.jsxs("div",{className:"bg-input-bg rounded-[16px] h-[58px] flex items-center px-4 gap-3 focus-within:ring-2 ring-primary/20 transition-all border border-primary/5",children:[t.jsx("input",{type:c?"text":"password",placeholder:"Sua senha",className:"bg-transparent flex-1 h-full outline-none text-text-main font-semibold placeholder:text-text-secondary/40 text-[15px]",value:m,onChange:e=>h(e.target.value),required:!0}),t.jsx("button",{type:"button",onClick:()=>d(!c),className:"text-text-main/60",children:t.jsx("span",{className:"material-symbols-outlined text-[22px]",children:c?"visibility":"visibility_off"})})]})]}),t.jsx("button",{type:"submit",className:"w-full h-[54px] bg-primary text-white font-bold rounded-[14px] text-[16px] mt-4 hover:brightness-110 active:scale-[0.98] transition-all shadow-lg shadow-primary/20",children:"Entrar Agora"}),t.jsx("button",{type:"button",onClick:()=>l("register"),className:"w-full h-[54px] bg-white text-primary border-2 border-primary/40 font-bold rounded-[14px] text-[16px] hover:bg-primary/5 active:scale-[0.98] transition-all",children:"Criar Nova Conta"})]})]})}),t.jsx("button",{className:"fixed bottom-6 right-6 size-12 bg-white rounded-full shadow-2xl flex items-center justify-center border border-gray-100 z-[100] active:scale-90 transition-all",children:t.jsx("img",{src:"https://ui-avatars.com/api/?name=Support&background=fdf2f8&color=ef4444",className:"w-full h-full rounded-full object-cover",alt:"Support"})}),t.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-4 bg-gray-200/50 rounded-t-[100%] blur-[2px]"})]})};export{l as default};
