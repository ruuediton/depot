import{r as e,j as t}from"./react-vendor-0Am1niUb.js";import{s,S as a}from"./index-BonT0QVc.js";import"./supabase-BsxaddrC.js";import"./vendor-DtN75V_I.js";const l=({onNavigate:l})=>{const[r,i]=e.useState("Todos"),[n,c]=e.useState(!1),[o,d]=e.useState([]),[x,m]=e.useState(!0),p={sucedido:"sucedido",completado:"sucedido",pendente:"pendente","processando...":"pendente",falha:"falha",rejeitado:"falha",rejeitada:"falha",cancelado:"falha"};e.useEffect(()=>{u()},[]);const u=async()=>{m(!0);const{data:{user:e}}=await s.auth.getUser();if(!e)return;const{data:t,error:a}=await s.from("depositos_clientes").select("*").eq("user_id",e.id).order("created_at",{ascending:!1});if(!a&&t){const e=t.map(e=>{const t=new Date(e.created_at),s=t.getDate().toString().padStart(2,"0"),a=["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"][t.getMonth()],l=t.getFullYear(),r=t.getHours().toString().padStart(2,"0"),i=t.getMinutes().toString().padStart(2,"0");return{id:e.id.toString(),title:e.nome_banco||"Transferência Bancária",date:`${s} ${a}, ${r}:${i}`,amount:e.valor_deposito,status:p[e.estado_de_pagamento]||"Pendente",icon:"account_balance",month:`${t.toLocaleString("pt-PT",{month:"long"})} ${l}`,raw_date:e.created_at}});d(e)}m(!1)},h=o.filter(e=>"Todos"===r||e.status===r),f=Array.from(new Set(h.map(e=>e.month)));return t.jsx("div",{className:"bg-background-dark font-display text-black antialiased min-h-screen flex flex-col selection:bg-primary selection:text-black",children:t.jsxs("div",{className:"relative flex h-full min-h-screen w-full flex-col overflow-x-hidden max-w-md mx-auto",children:[t.jsxs("header",{className:"relative header-gradient-mixture pb-16 pt-4 px-4 overflow-hidden",children:[t.jsx("div",{className:"absolute top-[-20%] right-[-10%] w-64 h-64 bg-white/10 rounded-full blur-3xl"}),t.jsx("div",{className:"absolute bottom-[-20%] left-[-10%] w-48 h-48 bg-white/5 rounded-full blur-2xl"}),t.jsxs("div",{className:"relative z-10 flex items-center justify-between",children:[t.jsx("button",{onClick:()=>l("deposit"),className:"w-11 h-11 flex items-center justify-center rounded-full bg-white/20 backdrop-blur-md transition-all active:scale-90",children:t.jsx("span",{className:"material-symbols-outlined text-white text-[28px]",children:"arrow_back"})}),t.jsx("h1",{className:"text-xl font-black text-white tracking-tight",children:"Depósitos"}),t.jsxs("div",{className:"relative",children:[t.jsx("button",{onClick:()=>c(!n),className:"w-11 h-11 flex items-center justify-center rounded-full transition-all backdrop-blur-md active:scale-90 "+(n?"bg-[#00C853] text-white shadow-lg":"bg-white/20 text-white"),children:t.jsx("span",{className:"material-symbols-outlined text-[24px]",children:"filter_list"})}),n&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"fixed inset-0 z-[100]",onClick:()=>c(!1)}),t.jsxs("div",{className:"absolute right-0 mt-3 w-52 bg-white border border-gray-100 rounded-3xl z-[101] py-2 overflow-hidden shadow-2xl animate-in fade-in zoom-in duration-200 origin-top-right",children:[t.jsx("p",{className:"px-5 py-3 text-[10px] font-black uppercase tracking-widest text-gray-400 border-b border-gray-100 mb-1",children:"Filtrar Status"}),["Todos","sucedido","pendente","falha"].map(e=>t.jsxs("button",{onClick:()=>(e=>{i(e),c(!1)})(e),className:"flex w-full items-center justify-between px-5 py-4 text-sm font-bold transition-colors "+(r===e?"text-[#00C853] bg-green-50":"text-gray-700 hover:bg-gray-50"),children:[t.jsx("span",{children:e}),r===e&&t.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"check_circle"})]},e))]})]})]})]})]}),t.jsxs("main",{className:"flex-1 flex flex-col no-scrollbar pt-2",children:["Todos"!==r&&t.jsx("div",{className:"px-4 py-2",children:t.jsxs("div",{className:"inline-flex items-center gap-2 bg-primary/10 border border-primary/20 px-3 py-1.5 rounded-full",children:[t.jsxs("span",{className:"text-[10px] font-black text-primary uppercase tracking-widest",children:["Filtro: ",r]}),t.jsx("button",{onClick:()=>i("Todos"),className:"flex items-center justify-center hover:text-black text-primary",children:t.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"close"})})]})}),t.jsxs("div",{className:"flex flex-col gap-6 pb-24",children:[x?t.jsxs("div",{className:"flex flex-col items-center justify-center py-20 animate-pulse",children:[t.jsx(a,{size:"w-12 h-12",className:"mb-4"}),t.jsx("p",{className:"text-gray-500 font-bold uppercase tracking-widest text-xs",children:"Carregando histórico..."})]}):f.map(e=>t.jsxs("div",{className:"flex flex-col",children:[t.jsx("div",{className:"px-4 pb-2 pt-2",children:t.jsx("h3",{className:"text-black text-lg font-bold leading-tight tracking-[-0.015em] capitalize",children:e})}),t.jsx("div",{className:"flex flex-col",children:h.filter(t=>t.month===e).map(e=>t.jsxs("div",{className:"flex items-center gap-4 px-4 py-4 justify-between hover:bg-gray-50 transition-colors cursor-pointer group border-b border-gray-100 last:border-0 "+("falha"===e.status?"opacity-60":""),children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"flex items-center justify-center rounded-xl shrink-0 size-11 transition-transform group-active:scale-90 "+("sucedido"===e.status?"bg-[#00C853] text-[#0F1111]":"bg-gray-100 border border-gray-200 text-gray-600"),children:t.jsx("span",{className:"material-symbols-outlined text-[24px]",children:e.icon})}),t.jsxs("div",{className:"flex flex-col justify-center min-w-0",children:[t.jsx("p",{className:"text-[text-black] text-base font-bold leading-none truncate mb-1.5",children:e.title}),t.jsx("p",{className:"text-[#565959] text-xs font-medium leading-none",children:e.date})]})]}),t.jsxs("div",{className:"flex flex-col items-end gap-1.5 shrink-0",children:[t.jsxs("p",{className:"text-base font-black leading-none "+("falha"===e.status?"text-gray-500 line-through":"text-black"),children:["falha"===e.status?"":"+ ",e.amount.toLocaleString()," Kz"]}),t.jsxs("div",{className:"flex items-center gap-1 px-2 py-0.5 rounded-full "+("sucedido"===e.status?"bg-green-500/10 text-green-600":"pendente"===e.status?"bg-blue-500/10 text-blue-600":"bg-red-500/10 text-red-500"),children:[t.jsx("span",{className:"material-symbols-outlined text-[10px] font-bold",children:"sucedido"===e.status?"check_circle":"pendente"===e.status?"schedule":"error"}),t.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest",children:e.status})]})]})]},e.id))})]},e)),!x&&0===h.length&&t.jsxs("div",{className:"flex flex-col items-center justify-center py-20 opacity-30",children:[t.jsx("span",{className:"material-symbols-outlined text-6xl mb-2",children:"history"}),t.jsx("p",{className:"font-bold uppercase tracking-[0.2em] text-xs",children:"Nenhum registro encontrado"})]})]})]})]})})};export{l as default};
