import{r as e,j as t}from"./react-vendor-C8-TlGsU.js";import{s as a}from"./index-BaS3q1EV.js";import"./pdf-utils-DX6aKe5X.js";import"./vendor-D2WcXlqy.js";import"./supabase-DIRwJvxg.js";const s=({onNavigate:s,data:i,showToast:n})=>{const[o,r]=e.useState(()=>{if(i?.deposit)return i.deposit;const e=localStorage.getItem("current_deposit_data");return e?JSON.parse(e):null}),[l,c]=e.useState(""),[d,x]=e.useState(""),[m,p]=e.useState(null),[u,h]=e.useState("https://wa.me/244943219453");e.useEffect(()=>{(async()=>{const{data:{user:e}}=await a.auth.getUser();if(e){const{data:t}=await a.from("profiles").select("phone").eq("id",e.id).single();t?.phone&&x(t.phone)}})(),(async()=>{try{const{data:e,error:t}=await a.from("atendimento_links").select("whatsapp_gerente_url").single();!t&&e?.whatsapp_gerente_url&&h(e.whatsapp_gerente_url)}catch(e){}})()},[]),e.useEffect(()=>{i?.deposit&&(r(i.deposit),localStorage.setItem("current_deposit_data",JSON.stringify(i.deposit)))},[i]);if(!o)return t.jsxs("div",{className:"fixed inset-0 z-[9999] bg-white flex flex-col items-center justify-center p-6 text-center",children:[t.jsx("span",{className:"material-symbols-outlined text-[#0F1111] text-6xl mb-4",children:"receipt_long"}),t.jsx("h3",{className:"text-xl font-black text-[#0F1111] mb-6",children:"Solicitação não encontrada"}),t.jsx("button",{onClick:()=>s("deposit"),className:"bg-[#00C853] px-8 py-3 rounded-xl font-black text-white active:scale-95 transition-transform",children:"Voltar"})]});const b=[{label:"Banco",value:o.nome_banco||o.nome_do_banco,id:"bank"},{label:"Titular",value:o.nome_destinatario||o.beneficiario,id:"owner"},{label:"IBAN",value:o.iban,id:"iban"},{label:"Valor",value:`${(Number(o.valor_deposito)||0).toLocaleString("pt-AO",{minimumFractionDigits:2})} KZs`,id:"amount",rawValue:o.valor_deposito.toString()}];return t.jsx("div",{className:"fixed inset-0 z-[9999] bg-white font-sans text-[#0F1111] overflow-y-auto",children:t.jsxs("div",{className:"flex flex-col min-h-screen max-w-md mx-auto",children:[t.jsxs("header",{className:"sticky top-0 z-10 bg-white px-4 py-3 border-b border-gray-100 flex items-center justify-between",children:[t.jsx("button",{onClick:()=>s("deposit"),className:"size-9 flex items-center justify-center rounded-full active:bg-[#00C853]/10 transition-colors text-[#00C853]",children:t.jsx("span",{className:"material-symbols-outlined text-[24px]",children:"arrow_back"})}),t.jsx("h1",{className:"text-[15px] font-bold text-[#0F1111] tracking-tight",children:"Confirme recarga"}),t.jsx("div",{className:"size-9"})]}),t.jsxs("main",{className:"flex-1 px-4 py-6 space-y-6",children:[t.jsxs("div",{className:"space-y-4",children:[t.jsx("h2",{className:"text-xl font-black text-[#0F1111] tracking-tight px-1",children:"Detalhes de recarga"}),t.jsx("div",{className:"bg-gray-50 rounded-2xl overflow-hidden border border-gray-100",children:b.map((e,a)=>t.jsxs("div",{className:"flex items-center justify-between px-4 py-4 cursor-pointer active:bg-[#00C853]/5 transition-colors group "+(a!==b.length-1?"border-b border-white":""),onClick:()=>{return t=e.rawValue||e.value,a=e.id,void(t&&(navigator.clipboard.writeText(t),p(a),setTimeout(()=>p(null),2e3)));var t,a},children:[t.jsxs("div",{className:"flex flex-col gap-0.5 flex-1 min-w-0",children:[t.jsx("span",{className:"text-[10px] font-bold text-[#565959] uppercase tracking-[0.1em]",children:e.label}),t.jsx("span",{className:"text-[14px] truncate "+("amount"===e.id?"text-red-600 font-black":"text-[#0F1111] font-bold"),children:e.value})]}),t.jsx("div",{className:"flex items-center gap-2 ml-3",children:m===e.id?t.jsxs("div",{className:"flex items-center gap-1 bg-[#00C853] px-2 py-1 rounded-lg animate-in zoom-in duration-200",children:[t.jsx("span",{className:"material-symbols-outlined text-white text-[14px]",children:"check"}),t.jsx("span",{className:"text-[9px] text-white font-black uppercase",children:"OK"})]}):t.jsx("span",{className:"material-symbols-outlined transition-colors text-[20px] "+("iban"===e.id?"text-[#00C853] animate-pulse font-bold":"text-[#565959]/30 group-active:text-[#00C853]"),children:"content_copy"})})]},e.id))})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-[11px] font-bold text-[#565959] uppercase tracking-wider px-1",children:"Nome do pagador"}),t.jsx("input",{value:l,onChange:e=>c(e.target.value),className:"w-full h-12 bg-gray-50 border border-transparent rounded-xl px-4 text-[14px] font-bold outline-none focus:border-[#00C853] focus:bg-white transition-all shadow-sm focus:shadow-md placeholder:text-gray-300",placeholder:"Digite seu nome completo",type:"text"})]}),t.jsxs("button",{onClick:async()=>{if(l)try{const e=`ID: ${d||o.id}\nVALOR: ${(Number(o.valor_deposito)||0).toLocaleString("pt-AO",{minimumFractionDigits:2})} KZs\nBANCO: ${o.nome_banco||o.nome_do_banco}\nNOME DO PAGADOR: ${l}`.trim(),t=u.includes("wa.me")?u.includes("?")?`${u}&text=`:`${u}?text=`:`https://wa.me/${u.replace(/\D/g,"")}?text=`;window.open(`${t}${encodeURIComponent(e)}`,"_blank"),n?.("Redirecionando para o WhatsApp...","success"),localStorage.removeItem("current_deposit_data"),s("home")}catch(e){n?.("Erro: "+e.message,"error")}else n?.("Por favor, digite seu nome","warning")},className:"w-full h-12 bg-[#00C853] text-white font-black rounded-xl transition-all text-[14px] shadow-lg shadow-[#00C853]/20 active:scale-[0.98] flex items-center justify-center gap-2",children:[t.jsx("span",{children:"Enviar comprovativo"}),t.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"send"})]}),t.jsx("div",{className:"p-4 bg-[#00C853]/10 border border-[#00C853]/30 rounded-xl",children:t.jsxs("div",{className:"flex items-start gap-2",children:[t.jsx("span",{className:"material-symbols-outlined text-[#00C853] text-[18px] mt-0.5 shrink-0",children:"info"}),t.jsx("p",{className:"text-[11px] text-[#0F1111] leading-relaxed font-medium",children:"Efetue a transferência e envie o comprovativo pelo WhatsApp para validação imediata."})]})})]})]})})};export{s as default};
