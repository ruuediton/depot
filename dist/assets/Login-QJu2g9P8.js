import{r as e,j as t}from"./react-vendor-C8-TlGsU.js";import{a,u as s,s as r}from"./index-BaS3q1EV.js";import{O as o}from"./OptimizedButton-uI_FIe8Q.js";import"./pdf-utils-DX6aKe5X.js";import"./vendor-D2WcXlqy.js";import"./supabase-DIRwJvxg.js";const l=({onNavigate:l,showToast:i})=>{const{runWithTimeout:n}=a(),{withLoading:c}=s(),[d,p]=e.useState(!1),[x,m]=e.useState(""),[h,u]=e.useState("");return t.jsxs("div",{className:"bg-white font-sans text-black antialiased min-h-screen flex flex-col pb-10",children:[t.jsxs("div",{className:"w-full relative mb-8 overflow-hidden",children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent to-white z-10"}),t.jsx("img",{src:"/login-promo.png",alt:"BP Promo",className:"w-full h-[280px] object-cover object-top mask-image-b-fade blur-[1px] opacity-90 scale-105"}),t.jsxs("div",{className:"absolute bottom-4 left-0 w-full text-center z-20 opacity-40",children:[t.jsx("p",{className:"text-gray-600 font-extrabold text-sm tracking-[3px] mb-0.5 drop-shadow-sm uppercase",children:"BP"}),t.jsx("h1",{className:"text-[20px] font-semibold text-gray-500 leading-tight drop-shadow-sm",children:"Entrar"})]}),t.jsxs(o,{onClick:()=>l("tutorials"),className:"absolute top-4 right-4 flex items-center gap-1.5 px-3 py-1.5 bg-white/80 backdrop-blur-sm text-[#00C853] rounded-full hover:bg-white transition-colors active:scale-95 z-30 shadow-sm",type:"button",children:[t.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"help"}),t.jsx("span",{className:"text-[12px] font-bold",children:"Tutoriais"})]})]}),t.jsxs("form",{className:"w-full flex-col gap-5 flex px-6",onSubmit:async e=>{e.preventDefault();const t=x.replace(/\D/g,""),a=h.trim();if(!t||t.length<9)i?.("Número de telefone inválido.","error");else if(!a||a.length<6||a.length>8)i?.("A senha deve ter entre 6 e 8 caracteres.","error");else try{await c(async()=>{const{data:e,error:s}=await r.rpc("check_login_status",{phone_input:t});if(!s&&e?.blocked)throw new Error(e.message);const o=`${t}@bpcommerce.user`,{error:l}=await n(()=>r.auth.signInWithPassword({email:o,password:a}));if(l)throw await r.rpc("register_failed_attempt",{phone_input:t}),new Error("Credenciais inválidas");await r.rpc("reset_login_attempts",{phone_input:t})},"Login sucedido!"),l("home")}catch(s){i?.(s.message||"Erro ao entrar","error")}},children:[t.jsxs("div",{className:"bg-gray-50 rounded-xl h-[50px] flex items-center px-4 gap-3 relative border border-transparent focus-within:border-[#00C853] transition-colors",children:[t.jsx("span",{className:"material-symbols-outlined text-[#00C853] text-[24px]",children:"person"}),t.jsx("span",{className:"text-gray-500 font-medium",children:"+244"}),t.jsx("span",{className:"material-symbols-outlined text-gray-400 text-[14px]",children:"arrow_drop_down"}),t.jsx("input",{type:"tel",placeholder:"Por favor digite nº celular",className:"bg-transparent flex-1 h-full outline-none text-[#111] font-medium placeholder:text-gray-400 text-[13px]",value:x,onChange:e=>m(e.target.value)})]}),t.jsxs("div",{className:"bg-gray-50 rounded-xl h-[50px] flex items-center px-4 gap-3 relative border border-transparent focus-within:border-[#00C853] transition-colors",children:[t.jsx("span",{className:"material-symbols-outlined text-[#00C853] text-[24px]",children:"lock"}),t.jsx("input",{type:d?"text":"password",placeholder:"Por favor digite senha login",className:"bg-transparent flex-1 h-full outline-none text-[#111] font-medium placeholder:text-gray-400 text-[13px]",value:h,onChange:e=>u(e.target.value)}),t.jsx("button",{type:"button",onClick:()=>p(!d),children:t.jsx("span",{className:"material-symbols-outlined text-gray-400 text-[20px]",children:d?"visibility":"visibility_off"})})]}),t.jsx(o,{type:"submit",className:"w-full h-[45px] bg-[#00C853] text-white font-bold rounded-2xl text-[16px] mt-2 hover:bg-[#00a844] active:scale-[0.98] transition-all shadow-lg shadow-green-200",children:"Entrar"}),t.jsx(o,{type:"button",onClick:()=>l("register"),className:"w-full h-[45px] bg-gray-100 text-gray-700 font-bold rounded-2xl text-[15px] mt-4 hover:bg-gray-200 active:scale-[0.98] transition-all",children:"Criar nova conta"})]})]})};export{l as default};
