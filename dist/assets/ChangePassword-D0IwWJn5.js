import{r as e,j as t}from"./react-vendor-C8-TlGsU.js";import{S as a,s}from"./index-BaS3q1EV.js";import"./pdf-utils-DX6aKe5X.js";import"./vendor-D2WcXlqy.js";import"./supabase-DIRwJvxg.js";const l=({onNavigate:l,showToast:r})=>{const[i,n]=e.useState(!1),[o,c]=e.useState(!1),[x,d]=e.useState(!1),[u,m]=e.useState(""),[p,h]=e.useState(""),[f,b]=e.useState(""),[g,v]=e.useState(!1),[j,y]=e.useState(!1);e.useEffect(()=>{y(6===p.length)},[p]);return t.jsxs("div",{className:"relative flex min-h-screen w-full flex-col overflow-x-hidden bg-white font-sans text-black antialiased",children:[t.jsxs("header",{className:"relative header-gradient-mixture pb-16 pt-4 px-4 overflow-hidden",children:[t.jsx("div",{className:"absolute top-[-20%] right-[-10%] w-64 h-64 bg-white/10 rounded-full blur-3xl"}),t.jsx("div",{className:"absolute bottom-[-20%] left-[-10%] w-48 h-48 bg-white/5 rounded-full blur-2xl"}),t.jsxs("div",{className:"relative z-10 flex items-center justify-between",children:[t.jsx("button",{onClick:()=>l("profile"),className:"w-11 h-11 flex items-center justify-center rounded-full bg-white/20 backdrop-blur-md transition-all active:scale-90",children:t.jsx("span",{className:"material-symbols-outlined text-white text-[28px]",children:"arrow_back"})}),t.jsx("h1",{className:"text-xl font-black text-white tracking-tight",children:"Trocar Senha"}),t.jsx("div",{className:"w-11"})]})]}),t.jsx("main",{className:"flex-1 px-5 py-2 flex flex-col",children:t.jsxs("form",{className:"flex flex-col gap-3 mt-4",onSubmit:async e=>{if(e.preventDefault(),u&&p&&f)if(p===f)if(j){v(!0);try{const{error:e}=await s.auth.updateUser({password:p});e?r?.(`Erro ao atualizar: ${e.message}`,"error"):(r?.("Senha alterada com sucesso!","success"),setTimeout(()=>l("profile"),2e3))}catch(t){r?.("Ocorreu um erro inesperado.","error")}finally{v(!1)}}else r?.("A nova senha deve ter exatamente 6 dígitos.","error");else r?.("A nova senha e a confirmação não coincidem.","error");else r?.("Por favor, preencha todos os campos.","warning")},children:[t.jsxs("div",{className:"bg-gray-50 rounded-xl h-[50px] flex items-center px-4 gap-3 relative border border-transparent focus-within:border-[#00C853] transition-colors",children:[t.jsx("span",{className:"material-symbols-outlined text-[#00C853] text-[24px]",children:"lock"}),t.jsx("input",{value:u,onChange:e=>m(e.target.value),className:"bg-transparent flex-1 h-full outline-none text-[#111] font-medium placeholder:text-gray-400 text-[14px]",placeholder:"Digite sua senha atual",type:i?"text":"password"}),t.jsx("button",{type:"button",onClick:()=>n(!i),children:t.jsx("span",{className:"material-symbols-outlined text-gray-400 text-[20px]",children:i?"visibility":"visibility_off"})})]}),t.jsxs("div",{className:"bg-gray-50 rounded-xl h-[50px] flex items-center px-4 gap-3 relative border border-transparent focus-within:border-[#00C853] transition-colors",children:[t.jsx("span",{className:"material-symbols-outlined text-[#00C853] text-[24px]",children:"lock"}),t.jsx("input",{value:p,onChange:e=>{const t=e.target.value.replace(/\D/g,"").slice(0,6);h(t)},className:"bg-transparent flex-1 h-full outline-none text-[#111] font-medium placeholder:text-gray-400 text-[14px]",placeholder:"Crie uma nova senha (6 dígitos)",type:o?"text":"password",maxLength:6,inputMode:"numeric"}),t.jsx("button",{type:"button",onClick:()=>c(!o),children:t.jsx("span",{className:"material-symbols-outlined text-gray-400 text-[20px]",children:o?"visibility":"visibility_off"})})]}),t.jsxs("div",{className:"bg-gray-50 rounded-xl h-[50px] flex items-center px-4 gap-3 relative border border-transparent focus-within:border-[#00C853] transition-colors",children:[t.jsx("span",{className:"material-symbols-outlined text-[#00C853] text-[24px]",children:"lock"}),t.jsx("input",{value:f,onChange:e=>{const t=e.target.value.replace(/\D/g,"").slice(0,6);b(t)},className:"bg-transparent flex-1 h-full outline-none text-[#111] font-medium placeholder:text-gray-400 text-[14px]",placeholder:"Repita a nova senha",type:x?"text":"password",maxLength:6,inputMode:"numeric"}),t.jsx("button",{type:"button",onClick:()=>d(!x),children:t.jsx("span",{className:"material-symbols-outlined text-gray-400 text-[20px]",children:x?"visibility":"visibility_off"})})]}),t.jsx("div",{className:"flex-1 min-h-[10px]"}),t.jsx("button",{type:"submit",disabled:g,className:"w-full h-[45px] rounded-2xl bg-[#00C853] hover:bg-[#00a844] active:scale-[0.98] transition-all flex items-center justify-center mb-6 shadow-lg shadow-green-200 "+(g?"opacity-50":""),children:g?t.jsx(a,{size:"w-6 h-6",className:"text-black"}):t.jsx("span",{className:"text-white text-[15px] font-bold tracking-wide",children:"Confirmar Alteração"})})]})})]})};export{l as default};
