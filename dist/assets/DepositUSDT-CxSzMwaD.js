import{r as e,j as t}from"./react-vendor-C8-TlGsU.js";import{u as a,s}from"./index-BaS3q1EV.js";import"./pdf-utils-DX6aKe5X.js";import"./vendor-D2WcXlqy.js";import"./supabase-DIRwJvxg.js";const r=({onNavigate:r,showToast:l,data:n})=>{const{withLoading:i}=a(),c=n?.amountUsdt||0,o=n?.amountKz||0,d=n?.exchangeRate||0,[x,m]=e.useState(null),[p,b]=e.useState(!1),h=x?.endereco_carteira||"Carregando...",u=x?.nome_destinatario||"Carregando...";e.useEffect(()=>{(async()=>{try{const{data:e,error:t}=await s.from("usdt_empresarial").select("*").eq("ativo",!0).single();!t&&e&&m(e)}catch(e){}})()},[]);return t.jsxs("div",{className:"bg-white font-sans text-black antialiased min-h-screen flex flex-col pb-32",children:[t.jsx("header",{className:"header-gradient-mixture pb-16 pt-4 px-4",children:t.jsxs("div",{className:"relative z-10 flex items-center justify-between",children:[t.jsx("button",{onClick:()=>r("deposit"),className:"w-11 h-11 flex items-center justify-center rounded-full bg-white/20 backdrop-blur-md transition-all active:scale-90",children:t.jsx("span",{className:"material-symbols-outlined text-white text-[28px]",children:"arrow_back"})}),t.jsx("h1",{className:"text-xl font-black text-white tracking-tight",children:"Recarregar USDT"}),t.jsx("button",{onClick:()=>r("deposit-usdt-history"),className:"w-11 h-11 flex items-center justify-center rounded-full bg-white/20 backdrop-blur-md transition-all active:scale-90",children:t.jsx("span",{className:"material-symbols-outlined text-white text-[24px]",children:"history"})})]})}),t.jsxs("main",{className:"flex-1 overflow-y-auto px-5 pt-6 no-scrollbar",children:[t.jsxs("div",{className:"flex flex-col items-center text-center mb-8",children:[t.jsx("div",{className:"size-16 bg-[#26a17b]/10 rounded-full flex items-center justify-center mb-4 ring-2 ring-[#26a17b]/20",children:t.jsx("span",{className:"material-symbols-outlined text-[#26a17b]",style:{fontSize:"32px",fontVariationSettings:"'FILL' 1"},children:"currency_bitcoin"})}),t.jsx("h1",{className:"text-2xl font-extrabold tracking-tight mb-2 text-black",children:"Depósito Cripto"}),t.jsxs("p",{className:"text-text-secondary text-sm leading-relaxed max-w-[280px]",children:["Recarregue sua conta usando USDT na rede ",t.jsx("span",{className:"text-black font-bold",children:"TRON (TRC20)"}),"."]})]}),t.jsxs("div",{className:"bg-gray-50 rounded-2xl p-6 mb-6 border border-gray-100 text-center",children:[t.jsx("p",{className:"text-gray-400 text-[11px] font-bold uppercase tracking-widest mb-1",children:"Valor a enviar"}),t.jsxs("div",{className:"flex items-center justify-center gap-1",children:[t.jsx("span",{className:"text-3xl font-black text-[#00C853]",children:c.toFixed(2)}),t.jsx("span",{className:"text-sm font-bold text-[#00C853] mt-2",children:"USDT"})]}),t.jsxs("div",{className:"mt-2 text-[12px] text-gray-400 font-medium bg-gray-100 rounded-full py-1 px-3 inline-block",children:["Equivalente a ",t.jsxs("span",{className:"text-[#0F1111] font-bold",children:[o.toLocaleString("pt-AO")," Kz"]})]})]}),t.jsxs("div",{className:"bg-gray-50 rounded-2xl p-6 border border-gray-100",children:[t.jsx("h3",{className:"text-xs font-bold text-gray-800 uppercase tracking-widest mb-6 text-center",children:"Dados para Transferência"}),t.jsxs("div",{className:"flex flex-col gap-1 mb-4 text-center",children:[t.jsx("label",{className:"text-[10px] font-bold text-gray-700 uppercase tracking-widest",children:"Destinatário"}),t.jsx("p",{className:"text-black font-bold text-sm tracking-wide",children:u})]}),t.jsx("div",{className:"flex justify-center mb-8",children:t.jsxs("div",{className:"p-3 bg-white rounded-2xl relative group",children:[t.jsx("div",{className:"size-48 bg-gray-100 flex items-center justify-center overflow-hidden rounded-xl border border-gray-200",children:t.jsx("img",{loading:"lazy",decoding:"async",src:`https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${h}`,alt:"USDT TRC20 QR Code",className:"size-full object-cover contrast-[1.05] brightness-[1.02] saturate-[1.05]"})}),t.jsx("div",{className:"absolute inset-0 bg-primary/10 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none rounded-2xl flex items-center justify-center",children:t.jsx("span",{className:"material-symbols-outlined text-black font-black",children:"zoom_in"})})]})}),t.jsxs("div",{className:"flex flex-col gap-2",children:[t.jsx("label",{className:"text-[10px] font-bold text-gray-700 uppercase tracking-widest text-center",children:"Endereço da Carteira (TRC20)"}),t.jsxs("div",{className:"flex items-center gap-2 bg-background-dark p-3 rounded-xl border border-brand-border",children:[t.jsx("p",{className:"flex-1 text-[13px] font-mono font-bold text-text-primary truncate text-center select-all",children:h}),t.jsx("button",{onClick:()=>{navigator.clipboard.writeText(h),l?.("Endereço copiado!","success")},className:"size-10 bg-primary rounded-lg flex items-center justify-center text-text-primary active:scale-90 transition-transform",children:t.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"content_copy"})})]})]})]}),t.jsx("div",{className:"mt-6 p-4 rounded-xl bg-orange-500/10 border border-orange-500/20",children:t.jsxs("div",{className:"flex gap-3",children:[t.jsx("span",{className:"material-symbols-outlined text-orange-500",children:"warning"}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("p",{className:"text-black text-xs font-bold uppercase tracking-tight",children:"Aviso Importante"}),t.jsxs("p",{className:"text-gray-900/80 text-[11px] leading-relaxed mt-1",children:["Envie apenas ",t.jsx("span",{className:"font-bold text-black underline",children:"USDT via rede TRC20"}),". O envio para outras redes ou moedas resultará na perda definitiva dos fundos."]})]})]})}),t.jsx("div",{className:"h-10"})]}),t.jsx("footer",{className:"fixed bottom-0 max-w-md w-full p-4 bg-white/95 border-t border-gray-100 z-50",children:t.jsxs("button",{onClick:async()=>{if(!c||c<4)l?.("Valor inválido.","error");else{b(!0);try{await i(async()=>{const{data:{user:e}}=await s.auth.getUser();if(!e)throw new Error("Sessão expirada.");const{data:t,error:a}=await s.rpc("create_usdt_deposit",{p_amount_usdt:c,p_exchange_rate:d});if(a)throw new Error("Erro de conexão.");if(t&&!t.success)throw new Error(t.message);return t.message},"Solicitação enviada! Aguarde a confirmação."),r("home")}catch(e){l?.(e.message,"error")}finally{b(!1)}}},disabled:p||!x,className:"w-full h-[45px] bg-[#00C853] text-white font-bold rounded-xl text-[16px] active:scale-[0.98] transition-all flex items-center justify-center gap-2 "+(p||!x?"opacity-50 grayscale":"shadow-lg shadow-green-200"),children:[t.jsx("span",{children:"Confirmar Depósito"}),t.jsx("span",{className:"material-symbols-outlined font-bold text-[20px]",children:"send_money"})]})})]})};export{r as default};
