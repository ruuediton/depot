import{r as e,j as a}from"./react-vendor-0Am1niUb.js";import{u as t,s,S as r}from"./index-BonT0QVc.js";import"./supabase-BsxaddrC.js";import"./vendor-DtN75V_I.js";const i=[8500,12e3,25e3,35e3,95e3,12e4,3e5],n=({onNavigate:n,showToast:l})=>{const[o,c]=e.useState(""),[d,x]=e.useState(0),{withLoading:p}=t(),[m,h]=e.useState([]),[b,g]=e.useState(!0),[u,f]=e.useState(null),[w,j]=e.useState("BANK"),[y,v]=e.useState(0),[N,k]=e.useState("0.00");e.useEffect(()=>{"USDT"===w&&fetch("https://api.exchangerate-api.com/v4/latest/USD").then(e=>e.json()).then(e=>{e?.rates?.AOA&&v(e.rates.AOA)}).catch(e=>{})},[w]),e.useEffect(()=>{if("USDT"===w&&o&&y>0){const e=parseFloat(o);if(!isNaN(e)){k((e/y).toFixed(2))}}},[o,y,w]),e.useEffect(()=>{S()},[]);const S=async()=>{try{const{data:e,error:a}=await s.from("bancos_empresa").select("*").eq("ativo",!0);if(!a&&e){const a=e.filter(e=>!e.nome_do_banco.toUpperCase().includes("USDT")&&!e.nome_do_banco.toUpperCase().includes("USTD"));h(a)}const{data:{user:t}}=await s.auth.getUser();if(t){const{data:e}=await s.from("profiles").select("balance").eq("id",t.id).single();e&&x(e.balance||0)}}catch(e){}finally{g(!1)}};return b?a.jsx("div",{className:"flex justify-center items-center h-screen bg-white",children:a.jsx(r,{size:"w-8 h-8",color:"text-[#00C853]"})}):a.jsxs("div",{className:"bg-[#F4F7F6] min-h-screen font-display text-gray-900 pb-20 antialiased",children:[a.jsxs("div",{className:"bg-gradient-to-br from-[#0F1111] to-[#1A1C1C] pt-12 pb-24 px-6 rounded-b-[48px] shadow-2xl relative overflow-hidden",children:[a.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-[#00C853]/10 blur-[100px] rounded-full -translate-y-1/2 translate-x-1/2 overflow-hidden pointer-events-none"}),a.jsx("div",{className:"absolute bottom-0 left-0 w-48 h-48 bg-[#00C853]/5 blur-[80px] rounded-full translate-y-1/2 -translate-x-1/2 overflow-hidden pointer-events-none"}),a.jsxs("div",{className:"flex items-center justify-between relative z-10",children:[a.jsx("button",{onClick:()=>n("home"),className:"size-11 flex items-center justify-center rounded-2xl bg-white/10 backdrop-blur-md text-white border border-white/10 active:scale-90 transition-all",children:a.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"arrow_back"})}),a.jsx("h1",{className:"text-white text-[18px] font-black tracking-tight",children:"Recarregar"}),a.jsx("button",{onClick:()=>n("deposit-history"),className:"size-11 flex items-center justify-center rounded-2xl bg-white/10 backdrop-blur-md text-white border border-white/10 active:scale-90 transition-all",children:a.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"history"})})]})]}),a.jsxs("main",{className:"px-6 -mt-16 relative z-10 space-y-6",children:[a.jsxs("div",{className:"bg-white rounded-[36px] p-8 shadow-premium border border-white/50 relative overflow-hidden",children:[a.jsx("div",{className:"absolute right-0 top-0 p-4 opacity-[0.03] pointer-events-none",children:a.jsx("span",{className:"material-symbols-outlined text-[120px]",children:"payments"})}),a.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest mb-6",children:"Valores Sugeridos"}),a.jsx("div",{className:"flex flex-wrap gap-2.5",children:i.map(e=>{const t=o===e.toString();return a.jsx("button",{onClick:()=>c(e.toString()),className:"px-5 py-3 rounded-2xl text-[14px] font-black transition-all active:scale-95 border-2 "+(t?"bg-gray-900 text-white border-gray-900 shadow-xl":"bg-gray-50 text-gray-900 border-transparent hover:border-gray-200"),children:e.toLocaleString("pt-AO")},e)})})]}),a.jsxs("section",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("button",{onClick:()=>{j("BANK"),f(null)},className:"relative overflow-hidden flex flex-col items-center gap-3 p-6 rounded-[32px] border-2 transition-all "+("BANK"===w?"bg-white border-[#00C853] shadow-xl":"bg-white border-transparent shadow-sm grayscale opacity-60"),children:[a.jsx("div",{className:"size-12 rounded-2xl flex items-center justify-center transition-all "+("BANK"===w?"bg-[#EEFFF5] text-[#00C853]":"bg-gray-50 text-gray-400"),children:a.jsx("span",{className:"material-symbols-outlined text-[28px]",children:"account_balance"})}),a.jsx("span",{className:"text-[14px] font-black tracking-tight",children:"Banco Nacional"}),"BANK"===w&&a.jsx("div",{className:"absolute top-3 right-3",children:a.jsx("span",{className:"material-symbols-outlined text-[#00C853] text-[20px]",children:"check_circle"})})]}),a.jsxs("button",{onClick:()=>{j("USDT"),f(null)},className:"relative overflow-hidden flex flex-col items-center gap-3 p-6 rounded-[32px] border-2 transition-all "+("USDT"===w?"bg-white border-[#00C853] shadow-xl":"bg-white border-transparent shadow-sm grayscale opacity-60"),children:[a.jsx("div",{className:"size-12 rounded-2xl flex items-center justify-center transition-all "+("USDT"===w?"bg-[#EEFFF5] text-[#00C853]":"bg-gray-50 text-gray-400"),children:a.jsx("span",{className:"material-symbols-outlined text-[28px]",children:"currency_bitcoin"})}),a.jsx("span",{className:"text-[14px] font-black tracking-tight",children:"USDT (Crypto)"}),"USDT"===w&&a.jsx("div",{className:"absolute top-3 right-3",children:a.jsx("span",{className:"material-symbols-outlined text-[#00C853] text-[20px]",children:"check_circle"})})]})]}),a.jsxs("div",{className:"bg-white rounded-[32px] p-8 shadow-premium border border-white/50",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Valor do Deposito"}),"USDT"===w&&o&&a.jsxs("span",{className:"px-3 py-1 bg-[#EEFFF5] text-[#00C853] text-[10px] font-black rounded-full border border-[#00C853]/10",children:["≈ ",N," USDT"]})]}),a.jsxs("div",{className:"flex items-center gap-4 border-b-2 border-gray-50 focus-within:border-[#00C853] transition-all pb-4",children:[a.jsx("span",{className:"text-[20px] font-black text-gray-400 tracking-tight",children:"KZs"}),a.jsx("input",{type:"number",value:o,onChange:e=>c(e.target.value),className:"bg-transparent flex-1 outline-none text-[32px] font-black text-gray-900 placeholder:text-gray-100 tracking-tighter",placeholder:"0,00"})]}),a.jsx("p",{className:"text-[11px] text-gray-400 font-medium mt-4",children:"Digite o valor em Kwanzas angolanos (AOA)"})]}),"BANK"===w&&a.jsxs("div",{className:"space-y-3",children:[a.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest px-1",children:"Selecione o Banco"}),a.jsx("div",{className:"bg-white rounded-[24px] overflow-hidden shadow-premium p-2 border border-white/50",children:a.jsx("div",{className:"flex flex-col gap-1",children:m.map(e=>a.jsxs("div",{onClick:()=>f(e),className:"flex items-center gap-4 p-4 rounded-2xl cursor-pointer transition-all "+(u?.id===e.id?"bg-gray-900 text-white":"hover:bg-gray-50"),children:[a.jsx("div",{className:"size-10 rounded-xl flex items-center justify-center "+(u?.id===e.id?"bg-white/10":"bg-gray-50 text-gray-400"),children:a.jsx("span",{className:"material-symbols-outlined",children:"account_balance"})}),a.jsx("span",{className:"text-[14px] font-black flex-1 tracking-tight",children:e.nome_do_banco}),u?.id===e.id&&a.jsx("span",{className:"material-symbols-outlined text-[#00C853] text-[20px]",children:"check_circle"})]},e.id))})})]}),a.jsxs("div",{className:"pt-6",children:[a.jsx("button",{onClick:async()=>{const e=parseFloat(o);if(o&&!isNaN(e)){if("BANK"===w){if(e<8500)return void l?.("Recarga mínima via banco: 8.500 KZs","warning");if(e>1e6)return void l?.("Recarga máxima via banco: 1.000.000 KZs","warning");if(!u)return void l?.("Por favor, selecione um banco.","warning")}else{const e=parseFloat(N);if(e<4)return void l?.("Valor insuficiente. Mínimo aprox. 4 USDT","warning");if(e>1e4)return void l?.("Recarga máxima via USDT: 10.000 USDT","warning")}try{await p(async()=>{const{data:{user:a}}=await s.auth.getUser();if(!a)return l?.("Sessão expirada. Faça login novamente.","error"),void n("login");if("USDT"===w)return void n("deposit-usdt",{amountKz:e,amountUsdt:parseFloat(N),exchangeRate:y});const{data:t,error:r}=await s.rpc("create_deposit_request",{p_amount:e,p_bank_name:u.nome_do_banco,p_iban:u.iban});if(r)throw r;t.success&&n("confirmar-deposito",{deposit:{...t.data,nome_destinatario:u.nome_destinatario,nome_banco:u.nome_do_banco}})},"Gerando dados de recarga...")}catch(a){l?.(a.message||"Opah algo deu errado","error")}}else l?.("Digite um valor válido.","warning")},disabled:b||!o||"BANK"===w&&(!u||parseFloat(o)<3e3)||"USDT"===w&&parseFloat(N)<4,className:"w-full h-[64px] bg-[#00C853] text-white font-black rounded-[24px] text-[15px] uppercase tracking-widest transition-all disabled:opacity-50 disabled:grayscale flex items-center justify-center shadow-[0_16px_32px_-8px_rgba(0,200,83,0.5)] active:scale-[0.97]",children:b?a.jsx(r,{size:"w-6 h-6",color:"text-white"}):"Confirmar Recarga"}),a.jsx("p",{className:"text-[10px] text-center text-gray-400 mt-6 uppercase tracking-[0.2em] font-black opacity-30",children:"Transação Segura 256-bit"})]})]})]})]})};export{n as default};
