import{r as e,j as t}from"./react-vendor-0Am1niUb.js";import{u as a,s as r}from"./index-BonT0QVc.js";import"./supabase-BsxaddrC.js";import"./vendor-DtN75V_I.js";const s=({onNavigate:s,showToast:l})=>{const[i,n]=e.useState(""),[o,d]=e.useState(""),[c,x]=e.useState(""),[m,p]=e.useState(""),[h,u]=e.useState(""),[f,b]=e.useState(""),[g,v]=e.useState(!1),[j,y]=e.useState(!1),[w,N]=e.useState(!1),[k,S]=e.useState(null),[C,M]=e.useState(!1),{withLoading:E}=a(),z=e.useRef(null),P=()=>{const e="0123456789";let t="";for(let a=0;a<4;a++)t+=e.charAt(Math.floor(10*Math.random()));b(t),T(t)},T=e=>{const t=z.current;if(!t)return;const a=t.getContext("2d");if(!a)return;a.clearRect(0,0,t.width,t.height),a.fillStyle="#f3f4f6",a.fillRect(0,0,t.width,t.height);for(let r=0;r<50;r++)a.fillStyle=`rgba(${255*Math.random()},${255*Math.random()},${255*Math.random()},0.5)`,a.beginPath(),a.arc(Math.random()*t.width,Math.random()*t.height,1,0,2*Math.PI),a.fill();for(let r=0;r<5;r++)a.strokeStyle=`rgba(${200*Math.random()},${200*Math.random()},${200*Math.random()},0.3)`,a.beginPath(),a.moveTo(Math.random()*t.width,Math.random()*t.height),a.lineTo(Math.random()*t.width,Math.random()*t.height),a.stroke();a.font="bold 24px monospace",a.textBaseline="middle",a.textAlign="center";for(let r=0;r<e.length;r++)a.save(),a.translate(20+20*r,t.height/2),a.rotate(.4*(Math.random()-.5)),a.fillStyle=`hsl(${360*Math.random()}, 70%, 30%)`,a.fillText(e[r],0,0),a.restore()};e.useEffect(()=>{P();const e=new URLSearchParams(window.location.search).get("ref");e&&p(e);const t=e=>{e.preventDefault(),S(e),M(!0)};return window.addEventListener("beforeinstallprompt",t),()=>{window.removeEventListener("beforeinstallprompt",t)}},[]);return t.jsxs("div",{className:"bg-bg-neutral min-h-screen font-sans text-text-main flex flex-col items-center pb-12 antialiased relative",children:[t.jsxs("div",{className:"w-full relative h-[280px] header-gradient-mixture overflow-hidden flex flex-col items-center justify-center",children:[t.jsx("div",{className:"absolute inset-0 opacity-20 pointer-events-none",style:{backgroundImage:"radial-gradient(circle, #ffffff 1.5px, transparent 1.5px)",backgroundSize:"24px 24px"}}),t.jsx("div",{className:"absolute top-6 left-6 flex items-center gap-4 z-20",children:t.jsx("button",{className:"flex items-center justify-center size-10 rounded-full bg-black/10 text-white backdrop-blur-sm active:scale-95 transition-all",children:t.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"headset_mic"})})}),t.jsx("div",{className:"absolute top-6 right-6 z-20",children:t.jsxs("button",{className:"flex items-center gap-1.5 px-3 py-1.5 rounded-full bg-black/10 text-white backdrop-blur-sm text-[12px] font-bold active:scale-95 transition-all",children:[t.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"language"}),"Português",t.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"expand_more"})]})}),t.jsxs("div",{className:"relative z-10 flex flex-col items-center",children:[t.jsx("div",{className:"w-24 h-24 bg-white p-2 rounded-xl rotate-0 flex items-center justify-center shadow-2xl mb-4 border-2 border-primary/20",children:t.jsxs("div",{className:"flex flex-col items-center leading-none text-primary",children:[t.jsx("span",{className:"text-[10px] font-black italic tracking-tighter",children:"THE"}),t.jsx("span",{className:"text-[18px] font-black tracking-tightest",children:"HOME"}),t.jsx("span",{className:"text-[14px] font-black italic tracking-tighter",children:"DEPOT"})]})}),t.jsx("h1",{className:"text-2xl font-black text-white tracking-widest uppercase drop-shadow-md",children:"THE HOME-VIP"})]})]}),t.jsx("div",{className:"w-full px-4 -mt-10 relative z-30",children:t.jsxs("div",{className:"bg-white rounded-[32px] overflow-hidden shadow-premium",children:[t.jsxs("div",{className:"flex",children:[t.jsx("div",{className:"bg-white px-8 py-4 rounded-tr-[32px] relative",children:t.jsx("span",{className:"text-primary font-black text-[15px]",children:"Cadastre-se por telefone"})}),t.jsx("div",{className:"flex-1 bg-transparent"})]}),t.jsxs("form",{className:"p-8 pt-4 flex flex-col gap-5",onSubmit:async e=>{if(e.preventDefault(),g){if(h!==f)return l?.("Código de verificação incorreto.","error"),P(),void u("");if(i.length<9)l?.("Número de telefone inválido.","error");else if(o.length<6)l?.("A senha deve ter pelo menos 6 caracteres.","error");else if(o===c)if(m)try{await E(async()=>{const e=`${i}@bpcommerce.user`,{error:t}=await r.auth.signUp({email:e,password:o,options:{data:{phone:i,referred_by:m}}});if(t){if(t.message.includes("already registered"))throw new Error("Este número já está registrado.");throw t}},"Registro realizado com sucesso!"),setTimeout(()=>s("login"),1500)}catch(t){l?.(t.message||"Erro ao registrar.","error")}else l?.("Por favor insira o código do convite.","warning");else l?.("As senhas não coincidem.","error")}else l?.("Concorde com os termos da isenção de responsabilidade.","warning")},children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-[14px] font-bold text-text-main ml-1",children:"Número de telefone"}),t.jsxs("div",{className:"bg-input-bg rounded-[16px] h-[58px] flex items-center px-4 gap-3 focus-within:ring-2 ring-primary/20 transition-all border border-primary/5",children:[t.jsx("span",{className:"text-text-main font-bold text-[14px]",children:"+244"}),t.jsx("input",{type:"tel",placeholder:"Número de telefone",className:"bg-transparent flex-1 h-full outline-none text-text-main font-semibold placeholder:text-text-secondary/40 text-[15px]",value:i,onChange:e=>n(e.target.value),required:!0})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-[14px] font-bold text-text-main ml-1 text-glow",children:"Código de Verificação"}),t.jsxs("div",{className:"bg-input-bg rounded-[16px] h-[58px] flex items-center px-4 gap-3 focus-within:ring-2 ring-primary/20 transition-all border border-primary/5",children:[t.jsx("input",{type:"text",placeholder:"Insira o código",className:"bg-transparent flex-1 h-full outline-none text-text-main font-semibold placeholder:text-text-secondary/40 text-[15px]",value:h,onChange:e=>u(e.target.value),required:!0}),t.jsx("div",{className:"h-10 w-24 shrink-0 overflow-hidden rounded-[12px] cursor-pointer",onClick:P,children:t.jsx("canvas",{ref:z,width:100,height:40,className:"w-full h-full object-cover"})})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-[14px] font-bold text-text-main ml-1",children:"Senha"}),t.jsxs("div",{className:"bg-input-bg rounded-[16px] h-[58px] flex items-center px-4 gap-3 focus-within:ring-2 ring-primary/20 transition-all border border-primary/5",children:[t.jsx("input",{type:j?"text":"password",placeholder:"Senha",className:"bg-transparent flex-1 h-full outline-none text-text-main font-semibold placeholder:text-text-secondary/40 text-[15px]",value:o,onChange:e=>d(e.target.value),required:!0}),t.jsx("button",{type:"button",onClick:()=>y(!j),className:"text-text-main/60",children:t.jsx("span",{className:"material-symbols-outlined text-[22px]",children:j?"visibility":"visibility_off"})})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-[14px] font-bold text-text-main ml-1",children:"Digite novamente a senha"}),t.jsxs("div",{className:"bg-input-bg rounded-[16px] h-[58px] flex items-center px-4 gap-3 focus-within:ring-2 ring-primary/20 transition-all border border-primary/5",children:[t.jsx("input",{type:w?"text":"password",placeholder:"Digite novamente a senha",className:"bg-transparent flex-1 h-full outline-none text-text-main font-semibold placeholder:text-text-secondary/40 text-[15px]",value:c,onChange:e=>x(e.target.value),required:!0}),t.jsx("button",{type:"button",onClick:()=>N(!w),className:"text-text-main/60",children:t.jsx("span",{className:"material-symbols-outlined text-[22px]",children:w?"visibility":"visibility_off"})})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-[14px] font-bold text-text-main ml-1",children:"Código de Convite"}),t.jsx("div",{className:"bg-input-bg rounded-[16px] h-[58px] flex items-center px-4 gap-3 focus-within:ring-2 ring-primary/20 transition-all border border-primary/5",children:t.jsx("input",{type:"text",placeholder:"Código de Convite",className:"bg-transparent flex-1 h-full outline-none text-text-main font-semibold placeholder:text-text-secondary/40 text-[15px]",value:m,onChange:e=>{new URLSearchParams(window.location.search).get("ref")||p(e.target.value)},readOnly:!!new URLSearchParams(window.location.search).get("ref"),required:!0})})]}),t.jsxs("div",{className:"flex items-center gap-3 px-1 mt-2",children:[t.jsx("div",{className:"size-5 rounded-md flex shrink-0 items-center justify-center border transition-all duration-300 "+(g?"bg-primary border-primary":"border-gray-300 bg-white"),onClick:()=>v(!g),children:g&&t.jsx("span",{className:"material-symbols-outlined text-white text-[14px] font-black",children:"check"})}),t.jsxs("p",{className:"text-[12px] text-text-secondary font-medium",children:["Concordar com os ",t.jsx("span",{className:"text-primary cursor-pointer border-b border-primary/20",children:"Termos e Regras"})]})]}),t.jsx("button",{type:"submit",className:"w-full h-[54px] bg-primary text-white font-bold rounded-[14px] text-[16px] mt-4 hover:brightness-110 active:scale-[0.98] transition-all shadow-lg shadow-primary/20",children:"Inscrever-se"}),C&&t.jsxs("button",{type:"button",onClick:async()=>{if(!k)return void l?.("App já está instalado ou não disponível para instalação.","info");k.prompt();const{outcome:e}=await k.userChoice;"accepted"===e?(l?.("App instalado com sucesso!","success"),M(!1)):l?.("Instalação cancelada.","info"),S(null)},className:"w-full h-[54px] bg-[#1a1c1e] text-white font-bold rounded-[14px] text-[14px] uppercase tracking-wide flex items-center justify-center gap-3 active:scale-[0.98] transition-all",children:[t.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"install_mobile"}),"Baixar Aplicativo"]}),t.jsx("button",{type:"button",onClick:()=>s("login"),className:"w-full h-[54px] bg-white text-primary border-2 border-primary/40 font-bold rounded-[14px] text-[16px] hover:bg-primary/5 active:scale-[0.98] transition-all",children:"Entrar"})]})]})}),t.jsx("button",{className:"fixed bottom-6 right-6 size-12 bg-white rounded-full shadow-2xl flex items-center justify-center border border-gray-100 z-[100] active:scale-90 transition-all",children:t.jsx("img",{src:"https://ui-avatars.com/api/?name=Support&background=fdf2f8&color=ef4444",className:"w-full h-full rounded-full object-cover",alt:"Support"})}),t.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-4 bg-gray-200/50 rounded-t-[100%] blur-[2px]"})]})};export{s as default};
